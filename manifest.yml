modules:
  macro:
    - key: mermaid-diagram
      resource: main
      resolver:
        function: resolver
      title: Mermaid Diagram
      description: Render Mermaid diagrams natively in Confluence
      categories:
        - visuals
        - development
      config:
        resource: config
        viewportSize: xlarge
        title: Edit Mermaid Diagram
        openOnInsert: true
      layout: block
  function:
    - key: resolver
      handler: index.handler
resources:
  - key: main
    path: static/mermaid-forge/build
  - key: config
    path: static/config/build
permissions:
  scopes:
    - storage:app
  external:
    fetch:
      backend:
        - address: "*.githubusercontent.com"
        - address: "*.github.com"
        - address: "*.gitlab.com"
        - address: "*.bitbucket.org"
app:
  runtime:
    name: nodejs22.x
  id: ari:cloud:ecosystem::app/1e1a79b6-a444-4319-ac1c-e77847b34934
